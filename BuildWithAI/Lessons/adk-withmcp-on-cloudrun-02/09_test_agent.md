# Test the Deployed Agent

With your agent now live on Cloud Run, you'll perform a test to confirm that the deployment was successful and the agent is working as expected.

You'll use the public Service URL to access the ADK's web interface and interact with the agent.

---

## Access the Agent UI

1. Open the public Cloud Run Service URL in your web browser:

   ```
   https://zoo-tour-guide-XXXXXXXXXXXX.europe-west1.run.app/
   ```

   Replace `XXXXXXXXXXXX` with your project number.

2. Because you used the `--with_ui` flag, you should see the **ADK Developer UI**.

3. Toggle on **Token Streaming** in the upper right corner for a better experience.

---

## Test the Agent

### Start a Conversation

Type `hello` and hit **Enter** to begin a new conversation.

The agent should respond quickly with its greeting:

```
"Hello! I'm your Zoo Tour Guide. I can help you learn about the amazing animals we have here. What would you like to know or explore today?"
```

### Ask Questions

Try asking the agent questions that combine zoo data with general knowledge:

```
Where can I find the polar bears in the zoo and what is their diet?
```

The agent will:
1. Query the MCP server for polar bear locations in the zoo
2. Query Wikipedia for information about polar bear diet
3. Combine both into a friendly, conversational response

### More Test Prompts

Try these prompts to test different capabilities:

| Prompt | Tests |
|--------|-------|
| "Tell me about the lions" | MCP server + Wikipedia |
| "How many penguins do you have?" | MCP server only |
| "What do elephants eat in the wild?" | Wikipedia only |
| "Where is Leo and how old is he?" | MCP server (specific animal) |

---

## Agent Flow Explained

Your system operates as an intelligent, multi-agent team. The process is managed by a clear sequence to ensure a smooth and efficient flow from a user's question to the final, detailed answer.

### 1. The Zoo Greeter (The Welcome Desk) ğŸ‘‹

The entire process begins with the **greeter agent**.

- **Its Job:** To start the conversation. Its instruction is to greet the user and ask what animal they would like to learn about.
- **Its Tool:** When the user replies, the Greeter uses its `add_prompt_to_state` tool to capture their exact words (e.g., "tell me about the lions") and save them in the system's memory.
- **The Handoff:** After saving the prompt, it immediately passes control to its sub-agent, the `tour_guide_workflow`.

### 2. The Comprehensive Researcher (The Super-Researcher) ğŸ”¬

This is the first step in the main workflow and the "brain" of the operation. Instead of a large team, you now have a single, highly-skilled agent that can access all the available information.

- **Its Job:** To analyze the user's question and form an intelligent plan. It uses the language model's powerful tool use capability to decide if it needs:
  - Internal data from the zoo's records (via the MCP Server)
  - General knowledge from the web (via the Wikipedia API)
  - Or, for complex questions, **both**

- **Its Action:** It executes the necessary tool(s) to gather all the required raw data. For example, if asked "How old are our lions and what do they eat in the wild?", it will call the MCP server for the ages and the Wikipedia tool for the diet information.

### 3. The Response Formatter (The Presenter) ğŸ¤

Once the Comprehensive Researcher has gathered all the facts, this is the final agent to run.

- **Its Job:** To act as the friendly voice of the Zoo Tour Guide. It takes the raw data (which could be from one or both sources) and polishes it.
- **Its Action:** It synthesizes all the information into a single, cohesive, and engaging answer. Following its instructions, it first presents the specific zoo information and then adds the interesting general facts.
- **The Final Result:** The text generated by this agent is the complete, detailed answer that the user sees in the chat window.

---

## Agent Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User: "hello"                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£  GREETER AGENT                                              â”‚
â”‚     â€¢ Welcomes user                                             â”‚
â”‚     â€¢ Saves prompt to state with add_prompt_to_state            â”‚
â”‚     â€¢ Hands off to tour_guide_workflow                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£  COMPREHENSIVE RESEARCHER                                   â”‚
â”‚     â€¢ Reads PROMPT from state                                   â”‚
â”‚     â€¢ Decides which tools to use:                               â”‚
â”‚       - MCP Server (zoo data) ğŸ¦                                â”‚
â”‚       - Wikipedia (general knowledge) ğŸ“š                        â”‚
â”‚     â€¢ Stores findings in research_data                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£  RESPONSE FORMATTER                                         â”‚
â”‚     â€¢ Reads research_data from state                            â”‚
â”‚     â€¢ Formats into friendly, conversational response            â”‚
â”‚     â€¢ Returns final answer to user                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              User sees: Friendly zoo tour response! ğŸ‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Learn More

If you're interested in learning more about building Agents, check out the following resources:

- [ADK Documentation](https://google.github.io/adk-docs/)
- [Building Custom Tools For ADK Agents](https://google.github.io/adk-docs/tools/)
- [ADK Samples Repository](https://github.com/google/adk-samples)